# 프로젝트 구조 설계 원칙

## 1. 최상위 원칙 (모든 스택 공통)

### 1.1 단순성과 명확성
- 유지보수가 쉬운 간단하고 읽기 쉬운 코드베이스 유지
- KISS(Know It Simple, Stupid) 원칙 준수
- 현명한 솔루션보다 깨끗하고 이해하기 쉬운 코드 우선

### 1.2 일관성
- 전체 코드베이스에 걸쳐 일관된 패턴 유지
- 명명법, 포맷팅 및 아키텍처에 대한 기 established된 규칙 준수
- 일관된 오류 처리 및 응답 형식 사용

### 1.3 관심사 분리
- 비즈니스 로직을 프레젠테이션 및 데이터 계층과 분리
- 구성 요소가 단일 책임에 집중하도록 유지
- 시스템의 서로 다른 부분 사이에 명확한 경계 유지

### 1.4 확장성
- 사용자 및 데이터 증가를 처리할 수 있는 시스템 설계
- 향후 향상을 허용하는 모듈식 아키텍처 구현
- 설계 결정의 성능 영향 고려

### 1.5 보안 우선
- 모든 계층에 보안 조치 구현
- 모든 입력 값 검증 및 정제
- 처음부터 보안 모범 사례 따르기

## 2. 의존성/레이어 원칙

### 2.1 의존성 관리
- 보안 위험과 팽창을 줄이기 위해 외부 의존성 최소화
- 재현 가능한 빌드를 보장하기 위해 의존성 버전 고정
- 보안 취약점 패치를 위해 정기적으로 의존성 업데이트
- 의존성 관리 도구 일관되게 사용(package-lock.json, yarn.lock)

### 2.2 레이어 아키텍처
- **프레젠테이션 레이어**: UI 문제, 사용자 상호작용 및 클라이언트 측 검증 처리
- **비즈니스 로직 레이어**: 핵심 애플리케이션 규칙 및 워크플로우 구현
- **데이터 액세스 레이어**: 데이터베이스 연결 및 쿼리 관리
- **인프라 레이어**: 외부 서비스, 캐싱 및 로깅 처리

### 2.3 레이어 의존성
- 레이어는 하위 레이어에만 의존해야 함(순환 의존성 없음)
- 프레젠테이션 레이어는 비즈니스 로직 레이어에 의존
- 비즈니스 로직 레이어는 데이터 액세스 레이어에 의존
- 데이터 액세스 레이어는 인프라 레이어에 의존
- 레이어 분리를 위해 인터페이스/계약 사용

### 2.4 API 경계
- 프론트엔드와 백엔드 사이의 API 계약 명확히 정의
- 하위 호환성 유지 위해 API 적절히 버전 관리
- 명확한 요청/응답 스키마로 모든 API 엔드포인트 문서화

## 3. 코드/네이밍 원칙

### 3.1 명명 규칙
- 변수, 함수 및 클래스에 대해 서술적이고 의미 있는 이름 사용
- JavaScript/TypeScript 변수 및 함수에는 camelCase 사용
- 클래스 이름 및 React 구성 요소에는 PascalCase 사용
- 상수에는 UPPER_SNAKE_CASE 사용
- 파일 이름 및 CSS 클래스에는 kebab-case 사용

### 3.2 코드 조직
- 가능하면 유형보다 기능별로 파일 구성
- 함수 및 메서드는 작고 집중적이도록 유지(단일 책임)
- 파일은 합리적인 크기로 제한(일반적으로 < 300줄)
- 모듈 또는 디렉토리에서 관련 기능 그룹화

### 3.3 문서화
- 복잡한 로직은 인라인 주석으로 문서화
- 공개 함수 및 클래스에는 JSDoc/TSDoc 사용
- 각 주요 모듈에 README 파일 유지
- 코드 변경과 함께 문서 동기화 유지

### 3.4 오류 처리
- 애플리케이션 전체에서 일관된 오류 처리 패턴 사용
- 디버깅을 위한 의미 있는 오류 메시지 제공
- 민감한 정보 노출 없이 적절하게 오류 로깅
- 복구 가능한 오류에 대해 우아한 저하 구현

## 4. 테스트/품질 원칙

### 4.1 테스트 전략
- 모든 비즈니스 로직 함수에 대한 단위 테스트 구현
- API 엔드포인트 및 데이터베이스 작업을 위한 통합 테스트 작성
- 중요한 사용자 흐름을 위한 엔드투엔드 테스트 생성
- 중요한 경로에 대해 최소 80% 코드 커버리지 유지

### 4.2 품질 보증
- 코드 스타일 일관성 강제를 위해 린터(ESLint, Prettier) 사용
- 낮은 품질의 코드가 커밋되는 것을 방지하기 위해 사전 커밋 훅 구현
- 풀 리퀘스트 병합 전 정기적인 코드 리뷰 수행
- CI/CD 파이프라인에서 자동화된 테스트 사용

### 4.3 성능 테스트
- API 응답 시간 모니터링 및 성능 벤치마크 설정
- 예상 부하 조건에서 애플리케이션 성능 테스트
- 데이터베이스 쿼리 최적화 및 적절한 캐싱 구현
- 프론트엔드 성능 프로파일링 및 번들 크기 최소화

### 4.4 테스트 주도 개발
- 적절할 때 새 기능 구현 전에 테스트 작성
- 테스트를 사용하여 비즈니스 요구 사항 및 승인 기준 검증
- 포괄적인 테스트 커버리지를 통해 자신 있게 코드 리팩토링
- 테스트 커버리지와 개발 속도 사이의 균형 유지

## 5. 설정/보안/운영 원칙

### 5.1 설정 관리
- 코드가 아닌 환경 변수에 구성 저장
- 필요한 환경 변수를 문서화하기 위해 .env.example 파일 사용
- 개발, 스테이징, 프로덕션을 위한 별도 구성 분리
- 민감한 자격 증명을 버전 관리에 커밋하지 않음

### 5.2 보안 조치
- bcrypt 또는 유사한 보안 알고리즘을 사용하여 비밀번호 해시
- 적절한 만료 시간으로 JWT 기반 인증 구현
- 인젝션 공격 방지를 위해 모든 사용자 입력 검증 및 정제
- 남용 방지를 위해 속도 제한 구현
- 프로덕션 환경에서 HTTPS 사용
- 데이터베이스 액세스에 대해 최소 권한 원칙 적용

### 5.3 운영 원칙
- 디버깅 및 모니터링을 위한 포괄적인 로깅 구현
- 적절한 로그 수준으로 구조화된 로깅 사용
- 애플리케이션 상태 및 성능 메트릭 모니터링
- 우아한 오류 복구 및 대체 메커니즘 계획
- 중요한 데이터에 대한 백업 전략 구현

### 5.4 환경 관리
- 개발, 스테이징 및 프로덕션 전반에서 일관된 환경 유지
- 일관된 배포 환경을 위해 Docker 컨테이너 사용
- 코드 변경 없이 환경별 구성 구현
- 인프라스트럭처-코드 도구로 환경 설정 자동화

## 6. 프론트엔드/백엔드 디렉토리 구조

### 6.1 프론트엔드 디렉토리 구조
```
frontend/
├── public/                    # 정적 자산(index.html, favicon 등)
├── src/
│   ├── components/           # 재사용 가능한 UI 구성 요소
│   │   ├── common/           # 공유 구성 요소(Button, Input 등)
│   │   ├── layout/           # 레이아웃 구성 요소(Header, Footer, Sidebar)
│   │   └── ui/               # 사용자 정의 UI 구성 요소
│   ├── pages/                # 페이지 수준 구성 요소
│   │   ├── Auth/             # 인증 페이지(Login, Register)
│   │   ├── Todos/            # Todo 관리 페이지
│   │   └── Common/           # 공유 페이지 구성 요소
│   ├── hooks/                # 사용자 정의 React 훅
│   │   ├── useAuth.js        # 인증 상태 관리
│   │   ├── useTodos.js       # Todo 데이터 관리
│   │   └── useApi.js         # 일반 API 훅
│   ├── services/             # API 서비스 구현
│   │   ├── api.js            # 기본 API 클라이언트 구성
│   │   ├── authService.js    # 인증 API 호출
│   │   └── todoService.js    # Todo API 호출
│   ├── store/                # 전역 상태 관리(Redux/Zustand 사용 시)
│   │   ├── slices/           # 상태 슬라이스
│   │   └── index.js          # 스토어 구성
│   ├── utils/                # 유틸리티 함수
│   │   ├── validators.js     # 입력 검증 유틸리티
│   │   ├── formatters.js     # 데이터 포맷팅 유틸리티
│   │   └── helpers.js        # 일반 도우미 함수
│   ├── styles/               # 전역 스타일 및 CSS 모듈
│   │   ├── globals.css       # 전역 스타일
│   │   ├── themes/           # 테마 정의
│   │   └── components/       # 구성 요소별 스타일
│   ├── types/                # TypeScript 타입 정의
│   │   ├── auth.types.ts     # 인증 관련 타입
│   │   ├── todo.types.ts     # Todo 관련 타입
│   │   └── api.types.ts      # API 응답 타입
│   ├── contexts/             # React Context 제공자
│   │   └── AuthContext.js    # 인증 컨텍스트
│   ├── constants/            # 애플리케이션 상수
│   │   └── api.constants.js  # API 엔드포인트 상수
│   ├── App.tsx               # 주요 애플리케이션 구성 요소
│   ├── main.tsx              # 진입점
│   └── routes.tsx            # 애플리케이션 라우팅 구성
├── .env.example              # 예제 환경 변수
├── .gitignore                # 버전 관리에서 제외할 파일
├── package.json              # 프로젝트 의존성 및 스크립트
├── tsconfig.json             # TypeScript 구성
└── vite.config.ts            # 빌드 도구 구성
```

### 6.2 백엔드 디렉토리 구조
```
backend/
├── src/
│   ├── app.js                # 주요 Express 애플리케이션 설정
│   ├── config/               # 구성 파일
│   │   ├── database.js       # 데이터베이스 연결 설정
│   │   ├── jwt.js            # JWT 구성
│   │   └── cors.js           # CORS 구성
│   ├── middleware/           # 사용자 정의 미들웨어 함수
│   │   ├── auth.js           # 인증 미들웨어
│   │   ├── errorHandler.js   # 오류 처리 미들웨어
│   │   ├── validator.js      # 요청 검증 미들웨어
│   │   └── logger.js         # 요청 로깅 미들웨어
│   ├── routes/               # 라우트 정의
│   │   ├── auth.js           # 인증 라우트
│   │   ├── todos.js          # Todo 라우트
│   │   └── index.js          # 주요 라우트 집계기
│   ├── controllers/          # 요청 처리기
│   │   ├── authController.js # 인증 로직
│   │   └── todosController.js# Todo 관리 로직
│   ├── models/               # 데이터 모델
│   │   ├── User.js           # 사용자 모델 정의
│   │   └── Todo.js           # Todo 모델 정의
│   ├── services/             # 비즈니스 로직 서비스
│   │   ├── authService.js    # 인증 비즈니스 로직
│   │   └── todoService.js    # Todo 비즈니스 로직
│   ├── utils/                # 유틸리티 함수
│   │   ├── hash.js           # 비밀번호 해시 유틸리티
│   │   ├── token.js          # JWT 토큰 유틸리티
│   │   ├── validators.js     # 입력 검증 유틸리티
│   │   └── responses.js      # 표준화된 응답 유틸리티
│   ├── validations/          # 요청 검증 스키마
│   │   ├── authValidation.js # 인증 검증 스키마
│   │   └── todoValidation.js # Todo 검증 스키마
│   └── seeds/                # 데이터베이스 시드 파일
│       └── seed.js           # 초기 데이터 시드 스크립트
├── tests/                    # 테스트 파일
│   ├── unit/                 # 단위 테스트
│   │   ├── controllers/      # 컨트롤러 테스트
│   │   ├── models/           # 모델 테스트
│   │   └── utils/            # 유틸리티 함수 테스트
│   ├── integration/          # 통합 테스트
│   │   ├── auth.test.js      # 인증 통합 테스트
│   │   └── todos.test.js     # Todo 통합 테스트
│   └── fixtures/             # 테스트 데이터 고정
├── migrations/               # 데이터베이스 마이그레이션 파일
│   ├── 20260211000000_create_users_table.js
│   └── 20260211000001_create_todos_table.js
├── .env                      # 환경 변수(git에서 무시됨)
├── .env.example              # 예제 환경 변수
├── .gitignore                # 버전 관리에서 제외할 파일
├── package.json              # 프로젝트 의존성 및 스크립트
├── server.js                 # 서버 진입점
└── jest.config.js            # Jest 테스트 구성
```

### 6.3 주요 구조 원칙
- 각 디렉토리는 깨끗한 가져오기 인터페이스를 제공하기 위해 index 파일 포함
- 유용할 때 유형보다 기능별로 관심사 분리
- 코드베이스 전체에서 일관된 명명 및 구조 패턴 유지
- 가져오기를 단순화하기 위해 배럴 내보내기(index.js 파일) 사용
- 민감한 정보는 버전 관리에서 제외
- 복잡성이 정당할 때 README 파일로 디렉토리 목적 문서화